:javascript
	function spot(id, stat, type, occ){
		document.getElementById("status").textContent=stat;
		document.getElementById("spotType").textContent=type;
		document.getElementById("occupying").textContent=occ;
		if(stat == "reserved"){
			document.getElementById("reserve").hidden=true;
			document.getElementById("take").hidden=false;
		}
		if(stat == "open"){
			document.getElementById("reserve").hidden=false;
			document.getElementById("take").hidden=false;
		}

		if(stat == "taken"){
			document.getElementById("reserve").hidden=true;
			document.getElementById("take").hidden=true;
		}
		event.preventDefault();
	}
% image_tag("spotlight.png", border: 0, :size => '520x360')
%table#parkingspots
	%thead
	%tbody
		- lot = @parkinglot
		- count = 0
		- @parkingspots.each_slice(lot.width) do |row|
			%tr
				- row.each do |spot|
					- count = count + 1
					- if spot.occupying != nil
						- u = @uname.values_at(spot.occupying)[0]
					- else
						- u = ""
					- if count % (2*lot.width) == 0
						-if spot.status=="open"
							%td.open= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-elsif spot.status=="reserved"
							%td.reserved= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-elsif spot.status=="taken"
							%td.taken= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-else
							%td= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						%tr
						- for i in 0...lot.width
							%td
					- else
						-if spot.status=="open"
							%td.open= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-elsif spot.status=="reserved"
							%td.reserved= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-elsif spot.status=="taken"
							%td.taken= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
						-else
							%td= link_to "", "", :onclick=>"spot(\"#{spot.id}\", \"#{spot.status}\", \"#{spot.spot_type}\", \"#{u}\")"
					

%div#div1
	%p#spotID
	%p#status
	%p#spotType
	%p#occupying	
	=button_to "Reserve", {}, {:id=>"reserve", :hidden=>true}
	=button_to "Take", {}, {:id=>"take", :hidden=>true}

= link_to 'Back', root_path

