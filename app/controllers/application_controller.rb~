#main application controller
class ApplicationController < ActionController::Base
  # Prevent CSRF attacks by raising an exception.
  # For APIs, you may want to use :null_session instead.
  protect_from_forgery with: :exception

	#add additional parameters for signup
	before_action :configure_permitted_parameters, if: :devise_controller?

	helper_method :update_helper

	def update_helper
		case purpose
			when 1
				spotStatus = 'taken'
				spotOccupying = @user.id
				spotIs_parked = true

				flash[:success] = "Successfully taken the spot";
				#flash[:failure] = "Failed to take the spot";
			when 2
				spotStatus = 'reserved'
				spotOccupying = @user.id
				# add code to start 5 min countdown for reservation

				flash[:success] = "Successfully reserved the spot";
				#flash[:failure] = "Failed to reserve the spot";

			when 3
				flash[:success] = "Successfully left the spot";
				#flash[:failure] = "Failed to leave the spot";

			when 4		
				flash[:success] = "Successfully canceled your reservation";
				#flash[:failure] = "Failed to cancel your reservation";

			else
				flash[:failure] = "Unknown Error";
		end
	end


	protected
	def configure_permitted_parameters
		#devise_parameter_sanitizer.permit(:sign_up, keys: [:username])
		devise_parameter_sanitizer.permit(:sign_up, keys: [:name, :LPN]) 
		devise_parameter_sanitizer.permit(:account_update, keys: [:name, :LPN]) 
	end	

end
